(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[664],{37002:function(e,a,t){Promise.resolve().then(t.bind(t,21107))},21107:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return q}});var s=t(76287),n=t(99334),i=t(6124),r=t(15184),l=t(42370),c=t(25753),d=t(88448),o=t(99499),u=t(15046),x=t(10483),m=t(46712),h=t(73004);function p(e){let{onAddToCart:a}=e,[t,i]=(0,n.useState)(""),[r,l]=(0,n.useState)("Semua"),[p,f]=(0,n.useState)([]),[j,g]=(0,n.useState)(["Semua"]),[v,b]=(0,n.useState)(!0);(0,n.useEffect)(()=>{(async()=>{try{let[e,a]=await Promise.all([fetch("/api/products"),fetch("/api/categories")]);if(!e.ok||!a.ok)throw Error("Failed to fetch data");let t=await e.json(),s=await a.json();f(t.data||[]);let n=["Semua",...s.data.map(e=>e.name)];g(n)}catch(e){console.error("Error fetching products and categories:",e)}finally{b(!1)}})()},[]);let y=p.filter(e=>{var a;let s=e.name.toLowerCase().includes(t.toLowerCase())||(null===(a=e.barcode)||void 0===a?void 0:a.includes(t)),n="Semua"===r||e.category===r;return s&&n&&e.stock>0});return v?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"flex gap-4",children:(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(x.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,s.jsx)(d.I,{placeholder:"Memuat produk...",disabled:!0,className:"pl-10"})]})}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 max-h-96 overflow-y-auto",children:[...Array(8)].map((e,a)=>(0,s.jsx)(c.Zb,{className:"animate-pulse",children:(0,s.jsx)(c.aY,{className:"p-4",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-20"}),(0,s.jsx)("div",{className:"h-5 bg-gray-200 rounded w-8"})]}),(0,s.jsx)("div",{className:"h-3 bg-gray-200 rounded w-16"}),(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-24"}),(0,s.jsx)("div",{className:"h-8 bg-gray-200 rounded w-full"})]})})},a))})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"flex gap-4",children:(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(x.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,s.jsx)(d.I,{placeholder:"Cari produk atau scan barcode...",value:t,onChange:e=>i(e.target.value),className:"pl-10"})]})}),(0,s.jsx)("div",{className:"flex gap-2 flex-wrap",children:j.map(e=>(0,s.jsx)(u.z,{variant:r===e?"default":"outline",size:"sm",onClick:()=>l(e),children:e},e))}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4  overflow-y-auto",children:y.map(e=>(0,s.jsx)(c.Zb,{className:"cursor-pointer hover:shadow-md transition-shadow",children:(0,s.jsx)(c.aY,{className:"p-4",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsx)("h3",{className:"font-medium text-sm line-clamp-2",children:e.name}),(0,s.jsx)(o.C,{variant:"secondary",className:"text-xs",children:e.stock})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:e.category}),(0,s.jsx)("p",{className:"font-bold text-blue-600",children:(0,h.xG)(e.price)}),(0,s.jsxs)(u.z,{size:"sm",className:"w-full",onClick:()=>a(e),disabled:0===e.stock,children:[(0,s.jsx)(m.Z,{className:"h-4 w-4 mr-1"}),"Tambah"]})]})})},e.id))}),0===y.length&&!v&&(0,s.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:(0,s.jsx)("p",{children:"Tidak ada produk ditemukan"})})]})}var f=t(37432),j=t(86297),g=t(91979),v=t(30634),b=t(25378),y=t(21616),N=t(50437);function k(e){let{items:a,onUpdateQuantity:t,onRemoveItem:i,onClearCart:r,onUpdateDiscount:l}=e,[o,x]=(0,n.useState)(!1),[p,k]=(0,n.useState)(null),[w,T]=(0,n.useState)(0),[C,_]=(0,n.useState)("percentage"),D=e=>{let a=e.price*e.quantity;if(e.discount&&e.discountType){let t="percentage"===e.discountType?a*e.discount/100:e.discount;return Math.max(0,a-t)}return a},S=a.reduce((e,a)=>e+D(a),0),I=.1*S,A=e=>{k(e),T(e.discount||0),_(e.discountType||"percentage"),x(!0)};return(0,s.jsxs)("div",{className:"flex flex-col h-full max-h-[calc(100vh-8rem)]",children:[(0,s.jsxs)(c.Zb,{className:"flex flex-col h-full",children:[(0,s.jsxs)(c.Ol,{className:"flex-shrink-0 flex flex-row items-center justify-between pb-4",children:[(0,s.jsx)(c.ll,{children:"Keranjang Belanja"}),a.length>0&&(0,s.jsxs)(u.z,{variant:"outline",size:"sm",onClick:r,children:[(0,s.jsx)(b.Z,{className:"h-4 w-4 mr-1"}),"Kosongkan"]})]}),(0,s.jsx)(c.aY,{className:"flex flex-col flex-1 min-h-0 space-y-4",children:0===a.length?(0,s.jsx)("div",{className:"flex-1 flex items-center justify-center text-center py-8 text-muted-foreground",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{children:"Keranjang kosong"}),(0,s.jsx)("p",{className:"text-sm",children:"Tambahkan produk untuk memulai transaksi"})]})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"flex-1 min-h-0 overflow-y-auto max-h-[300px] pr-2 space-y-3",children:a.map(e=>{let a=D(e),n=e.discount&&e.discount>0,r=e.price*e.quantity;return(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3 border rounded-lg bg-white shadow-sm",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"font-medium text-sm truncate",children:e.productName}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,h.xG)(e.price)}),n&&(0,s.jsxs)("p",{className:"text-xs text-green-600",children:["Diskon: ","percentage"===e.discountType?"".concat(e.discount,"%"):(0,h.xG)(e.discount)]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,s.jsx)(u.z,{variant:"outline",size:"icon",className:"h-8 w-8 bg-transparent",onClick:()=>t(e.productId,Math.max(0,e.quantity-1)),children:(0,s.jsx)(y.Z,{className:"h-3 w-3"})}),(0,s.jsx)(d.I,{type:"number",value:e.quantity.toString(),onChange:a=>t(e.productId,Number.parseInt(a.target.value)||0),className:"w-16 h-8 text-center",min:"0"}),(0,s.jsx)(u.z,{variant:"outline",size:"icon",className:"h-8 w-8 bg-transparent",onClick:()=>t(e.productId,e.quantity+1),children:(0,s.jsx)(m.Z,{className:"h-3 w-3"})}),l&&(0,s.jsx)(u.z,{variant:"outline",size:"icon",className:"h-8 w-8 bg-transparent",onClick:()=>A(e),children:(0,s.jsx)(N.Z,{className:"h-3 w-3"})})]}),(0,s.jsxs)("div",{className:"text-right min-w-20 flex-shrink-0",children:[(0,s.jsx)("p",{className:"font-medium text-sm",children:(0,h.xG)(a)}),n&&(0,s.jsx)("p",{className:"text-xs text-muted-foreground line-through",children:(0,h.xG)(r)}),(0,s.jsx)(u.z,{variant:"ghost",size:"sm",onClick:()=>i(e.productId),className:"h-6 w-6 p-0 text-red-500 hover:text-red-700 mt-1",children:(0,s.jsx)(b.Z,{className:"h-3 w-3"})})]})]},e.productId)})}),(0,s.jsx)("div",{className:"flex-shrink-0 pt-4 border-t bg-white",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{children:"Subtotal:"}),(0,s.jsx)("span",{children:(0,h.xG)(S)})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{children:"Pajak (10%):"}),(0,s.jsx)("span",{children:(0,h.xG)(I)})]}),(0,s.jsx)(f.Z,{}),(0,s.jsxs)("div",{className:"flex justify-between font-bold text-lg",children:[(0,s.jsx)("span",{children:"Total:"}),(0,s.jsx)("span",{className:"text-blue-600",children:(0,h.xG)(S+I)})]})]})})]})})]}),(0,s.jsx)(j.Vq,{open:o,onOpenChange:x,children:(0,s.jsxs)(j.cZ,{children:[(0,s.jsx)(j.fK,{children:(0,s.jsx)(j.$N,{children:"Atur Diskon"})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(g._,{children:"Produk"}),(0,s.jsx)("p",{className:"text-sm font-medium",children:null==p?void 0:p.productName})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(g._,{children:"Tipe Diskon"}),(0,s.jsxs)(v.Ph,{value:C,onValueChange:e=>_(e),children:[(0,s.jsx)(v.i4,{children:(0,s.jsx)(v.ki,{})}),(0,s.jsxs)(v.Bw,{children:[(0,s.jsx)(v.Ql,{value:"percentage",children:"Persentase (%)"}),(0,s.jsx)(v.Ql,{value:"fixed",children:"Nominal (Rp)"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(g._,{children:"Nilai Diskon"}),(0,s.jsx)(d.I,{type:"number",value:w,onChange:e=>T(Number.parseFloat(e.target.value)||0),placeholder:"0",min:"0",max:"percentage"===C?100:void 0})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)(u.z,{variant:"outline",onClick:()=>x(!1),children:"Batal"}),(0,s.jsx)(u.z,{onClick:()=>{p&&l&&(l(p.productId,w,C),x(!1),k(null),T(0))},children:"Terapkan"})]})]})]})})]})}var w=t(72981),T=t(76037);function C(e){let{className:a,...t}=e;return(0,s.jsx)(w.fC,{"data-slot":"radio-group",className:(0,h.cn)("grid gap-3",a),...t})}function _(e){let{className:a,...t}=e;return(0,s.jsx)(w.ck,{"data-slot":"radio-group-item",className:(0,h.cn)("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...t,children:(0,s.jsx)(w.z$,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:(0,s.jsx)(T.Z,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}var D=t(53894),S=t(33797);new D.Xendit({secretKey:S.env.XENDIT_SECRET_KEY||"xnd_development_XXXXXXXXXXXXXXXXXXXX",publicKey:S.env.XENDIT_PUBLIC_KEY||"xnd_public_development_XXXXXXXXXXXXXXXXXXXX"});let I={QRIS:{code:"QRIS",name:"QRIS",icon:"\uD83D\uDCF1",description:"Scan QR Code dengan e-wallet favorit Anda"}},A={OVO:{code:"OVO",name:"OVO",icon:"\uD83D\uDFE0",description:"Bayar dengan OVO"},DANA:{code:"DANA",name:"DANA",icon:"\uD83D\uDD35",description:"Bayar dengan DANA"},LINKAJA:{code:"LINKAJA",name:"LinkAja",icon:"\uD83D\uDD34",description:"Bayar dengan LinkAja"},SHOPEEPAY:{code:"SHOPEEPAY",name:"ShopeePay",icon:"\uD83D\uDFE0",description:"Bayar dengan ShopeePay"},GOPAY:{code:"GOPAY",name:"GoPay",icon:"\uD83D\uDFE2",description:"Bayar dengan GoPay"}},E={BCA:{code:"BCA",name:"BCA Virtual Account",icon:"\uD83C\uDFE6",description:"Transfer ke BCA Virtual Account"},BNI:{code:"BNI",name:"BNI Virtual Account",icon:"\uD83C\uDFE6",description:"Transfer ke BNI Virtual Account"},BRI:{code:"BRI",name:"BRI Virtual Account",icon:"\uD83C\uDFE6",description:"Transfer ke BRI Virtual Account"},MANDIRI:{code:"MANDIRI",name:"Mandiri Virtual Account",icon:"\uD83C\uDFE6",description:"Transfer ke Mandiri Virtual Account"}},z={CREDIT_CARD:{code:"CREDIT_CARD",name:"Credit Card",icon:"\uD83D\uDCB3",description:"Bayar dengan Kartu Kredit"}};var R=t(94141);function O(e){let{isOpen:a,onClose:t,amount:i,onPaymentSuccess:r,transactionId:l}=e,[c,o]=(0,n.useState)("QRIS-QRIS"),[x,m]=(0,n.useState)({name:"",email:"",phone:""}),[p,f]=(0,n.useState)(!1),[v,b]=(0,n.useState)(null),[y,N]=(0,n.useState)(null),k=async()=>{f(!0);try{let[e,a]=c.split("-"),s=await fetch("/api/xendit/create-payment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:i,currency:"IDR",reference_id:l,description:"Pembayaran Family Store - ".concat(l),customer:{given_names:x.name,email:x.email,mobile_number:x.phone},payment_method:function(e,a){switch(e){case"QRIS":default:return{type:"QRIS",reusability:"ONE_TIME_USE",qris:{}};case"EWALLET":return{type:"EWALLET",reusability:"ONE_TIME_USE",ewallet:{channel_code:a}};case"VIRTUAL_ACCOUNT":return{type:"VIRTUAL_ACCOUNT",reusability:"ONE_TIME_USE",virtual_account:{channel_code:a}};case"CREDIT_CARD":return{type:"CARD",reusability:"ONE_TIME_USE",card:{}}}}(e,a),metadata:{transaction_id:l}})}),n=await s.json();if(n.actions&&n.actions.length>0){let a=n.actions.find(e=>"AUTH"===e.action)||n.actions[0];a&&(b(a.url),"QRIS"===e&&N(a.url),setTimeout(()=>{r(n),t()},2e3))}else r(n),t()}catch(e){console.error("Payment error:",e),alert("Terjadi kesalahan saat memproses pembayaran")}finally{f(!1)}};if(v){let[e]=c.split("-");return"QRIS"===e?(0,s.jsx)(j.Vq,{open:a,onOpenChange:t,children:(0,s.jsxs)(j.cZ,{className:"sm:max-w-md",children:[(0,s.jsx)(j.fK,{children:(0,s.jsx)(j.$N,{children:"Scan QR Code untuk Pembayaran"})}),(0,s.jsxs)("div",{className:"text-center py-6",children:[(0,s.jsx)("div",{className:"bg-white p-6 rounded-lg border-2 border-dashed border-gray-300 mb-4",children:(0,s.jsx)("div",{className:"w-48 h-48 mx-auto bg-gray-100 rounded-lg flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-6xl mb-2",children:"\uD83D\uDCF1"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"QR Code akan muncul di sini"}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Gunakan e-wallet favorit Anda untuk scan"})]})})}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Scan QR Code di atas dengan aplikasi e-wallet Anda (OVO, DANA, GoPay, dll)"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u.z,{onClick:()=>window.open(v,"_blank"),className:"w-full",children:"Buka Halaman Pembayaran"}),(0,s.jsx)(u.z,{variant:"outline",onClick:t,className:"w-full",children:"Tutup"})]})]})]})}):(0,s.jsx)(j.Vq,{open:a,onOpenChange:t,children:(0,s.jsxs)(j.cZ,{className:"sm:max-w-md",children:[(0,s.jsx)(j.fK,{children:(0,s.jsx)(j.$N,{children:"Mengarahkan ke Pembayaran"})}),(0,s.jsxs)("div",{className:"text-center py-6",children:[(0,s.jsx)(R.Z,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Anda akan diarahkan ke halaman pembayaran..."}),(0,s.jsx)(u.z,{onClick:()=>window.open(v,"_blank"),className:"w-full",children:"Buka Halaman Pembayaran"})]})]})})}return(0,s.jsx)(j.Vq,{open:a,onOpenChange:t,children:(0,s.jsxs)(j.cZ,{className:"sm:max-w-md",children:[(0,s.jsx)(j.fK,{children:(0,s.jsx)(j.$N,{children:"Pembayaran Xendit"})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"bg-muted p-3 rounded-lg",children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Total Pembayaran"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-primary",children:(0,h.xG)(i)})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(g._,{children:"Data Pelanggan"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(d.I,{placeholder:"Nama Lengkap",value:x.name,onChange:e=>m(a=>({...a,name:e.target.value}))}),(0,s.jsx)(d.I,{type:"email",placeholder:"Email",value:x.email,onChange:e=>m(a=>({...a,email:e.target.value}))}),(0,s.jsx)(d.I,{placeholder:"Nomor Telepon",value:x.phone,onChange:e=>m(a=>({...a,phone:e.target.value}))})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(g._,{className:"text-base font-semibold",children:"Pilih Metode Pembayaran"}),(0,s.jsx)(C,{value:c,onValueChange:o,children:(0,s.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:(()=>{let e=[];return Object.entries(I).forEach(a=>{let[t,n]=a;e.push((0,s.jsxs)("div",{className:"flex items-center space-x-3 p-3 border rounded-lg hover:bg-gray-50",children:[(0,s.jsx)(_,{value:"QRIS-".concat(t),id:"QRIS-".concat(t)}),(0,s.jsxs)(g._,{htmlFor:"QRIS-".concat(t),className:"flex items-center space-x-3 cursor-pointer flex-1",children:[(0,s.jsx)("span",{className:"text-2xl",children:n.icon}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-medium",children:n.name}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:n.description})]})]})]},"QRIS-".concat(t)))}),Object.entries(A).forEach(a=>{let[t,n]=a;e.push((0,s.jsxs)("div",{className:"flex items-center space-x-3 p-3 border rounded-lg hover:bg-gray-50",children:[(0,s.jsx)(_,{value:"EWALLET-".concat(t),id:"EWALLET-".concat(t)}),(0,s.jsxs)(g._,{htmlFor:"EWALLET-".concat(t),className:"flex items-center space-x-3 cursor-pointer flex-1",children:[(0,s.jsx)("span",{className:"text-2xl",children:n.icon}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-medium",children:n.name}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:n.description})]})]})]},"EWALLET-".concat(t)))}),Object.entries(E).forEach(a=>{let[t,n]=a;e.push((0,s.jsxs)("div",{className:"flex items-center space-x-3 p-3 border rounded-lg hover:bg-gray-50",children:[(0,s.jsx)(_,{value:"VIRTUAL_ACCOUNT-".concat(t),id:"VIRTUAL_ACCOUNT-".concat(t)}),(0,s.jsxs)(g._,{htmlFor:"VIRTUAL_ACCOUNT-".concat(t),className:"flex items-center space-x-3 cursor-pointer flex-1",children:[(0,s.jsx)("span",{className:"text-2xl",children:n.icon}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-medium",children:n.name}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:n.description})]})]})]},"VIRTUAL_ACCOUNT-".concat(t)))}),Object.entries(z).forEach(a=>{let[t,n]=a;e.push((0,s.jsxs)("div",{className:"flex items-center space-x-3 p-3 border rounded-lg hover:bg-gray-50",children:[(0,s.jsx)(_,{value:"CREDIT_CARD-".concat(t),id:"CREDIT_CARD-".concat(t)}),(0,s.jsxs)(g._,{htmlFor:"CREDIT_CARD-".concat(t),className:"flex items-center space-x-3 cursor-pointer flex-1",children:[(0,s.jsx)("span",{className:"text-2xl",children:n.icon}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-medium",children:n.name}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:n.description})]})]})]},"CREDIT_CARD-".concat(t)))}),e})()})})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(u.z,{variant:"outline",onClick:t,className:"flex-1 bg-transparent",children:"Batal"}),(0,s.jsx)(u.z,{onClick:k,disabled:p||!x.name||!x.email,className:"flex-1",children:p?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(R.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Memproses..."]}):"Bayar Sekarang"})]})]})]})})}var P=t(33859),X=t(7948),M=t(94083),G=t(5857),V=t.n(G);function B(e){let{transactionCode:a,customerName:t,items:i,subtotal:r,tax:l,total:d,paymentMethod:o,amountPaid:x,change:m,cashierName:p,transactionDate:f,transactionDiscount:j,onNewTransaction:g}=e,v=(0,n.useRef)(null),b=e=>{let a=e.price*e.quantity;if(e.discount&&e.discountType){let t="percentage"===e.discountType?a*e.discount/100:e.discount;return Math.max(0,a-t)}return a},y=async()=>{if(v.current)try{let e=await V()(v.current,{scale:2,backgroundColor:"#ffffff",useCORS:!0}),t=e.toDataURL("image/png"),s=new M.ZP({orientation:"portrait",unit:"mm",format:[80,200]}),n=80*e.height/e.width,i=n,r=0;for(s.addImage(t,"PNG",0,r,80,n),i-=200;i>=0;)r=i-n,s.addPage(),s.addImage(t,"PNG",0,r,80,n),i-=200;s.save("struk-".concat(a,".pdf"))}catch(e){console.error("Error generating PDF:",e)}};return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex gap-2 no-print",children:[(0,s.jsxs)(u.z,{onClick:()=>{if(v.current){let e=window.open("","_blank");e&&(e.document.write("\n          <html>\n            <head>\n              <title>Struk - ".concat(a,"</title>\n              <style>\n                body { \n                  font-family: 'Courier New', monospace; \n                  font-size: 12px; \n                  margin: 0; \n                  padding: 20px;\n                  background: white;\n                }\n                .receipt { \n                  max-width: 300px; \n                  margin: 0 auto; \n                  background: white;\n                }\n                .header { text-align: center; margin-bottom: 20px; }\n                .store-name { font-size: 18px; font-weight: bold; margin-bottom: 5px; }\n                .store-address { font-size: 10px; color: #666; }\n                .divider { border-top: 1px dashed #000; margin: 10px 0; }\n                .item-row { display: flex; justify-content: space-between; margin: 5px 0; }\n                .item-name { flex: 1; }\n                .item-price { text-align: right; }\n                .total-section { margin-top: 15px; }\n                .total-row { display: flex; justify-content: space-between; margin: 3px 0; }\n                .grand-total { font-weight: bold; font-size: 14px; border-top: 1px solid #000; padding-top: 5px; }\n                .footer { text-align: center; margin-top: 20px; font-size: 10px; color: #666; }\n                @media print {\n                  body { margin: 0; padding: 10px; }\n                  .no-print { display: none; }\n                }\n              </style>\n            </head>\n            <body>\n              ").concat(v.current.innerHTML,"\n            </body>\n          </html>\n        ")),e.document.close(),e.focus(),e.print(),e.close())}},size:"sm",className:"flex items-center gap-2",children:[(0,s.jsx)(P.Z,{className:"h-4 w-4"}),"Cetak Struk"]}),(0,s.jsxs)(u.z,{onClick:y,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[(0,s.jsx)(X.Z,{className:"h-4 w-4"}),"Download PDF"]}),g&&(0,s.jsx)(u.z,{onClick:g,variant:"default",size:"sm",className:"flex items-center gap-2",children:"Transaksi Baru"})]}),(0,s.jsx)(c.Zb,{ref:v,className:"max-w-sm mx-auto bg-white",children:(0,s.jsxs)(c.aY,{className:"p-4",children:[(0,s.jsxs)("div",{className:"text-center mb-4",children:[(0,s.jsx)("h2",{className:"text-lg font-bold",children:"FAMILY STORE"}),(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"Toko Kelontong Serba Rp15.000"}),(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"Jl. Contoh No. 123, Jakarta"}),(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"Telp: (021) 1234-5678"})]}),(0,s.jsx)("div",{className:"border-t border-dashed border-gray-400 my-3"}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{children:"No. Transaksi:"}),(0,s.jsx)("span",{className:"font-mono",children:a})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{children:"Tanggal:"}),(0,s.jsx)("span",{children:new Intl.DateTimeFormat("id-ID",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(f)})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{children:"Kasir:"}),(0,s.jsx)("span",{children:p})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{children:"Pelanggan:"}),(0,s.jsx)("span",{children:t})]})]}),(0,s.jsx)("div",{className:"border-t border-dashed border-gray-400 my-3"}),(0,s.jsx)("div",{className:"mb-3",children:i.map(e=>{let a=b(e),t=e.discount&&e.discount>0;return(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"font-medium",children:e.productName}),(0,s.jsx)("span",{children:(0,h.xG)(e.price)})]}),(0,s.jsxs)("div",{className:"flex justify-between text-xs text-gray-600",children:[(0,s.jsxs)("span",{children:[e.quantity," x ",(0,h.xG)(e.price)]}),(0,s.jsx)("span",{children:(0,h.xG)(a)})]}),t&&(0,s.jsxs)("div",{className:"flex justify-between text-xs text-green-600",children:[(0,s.jsxs)("span",{children:["Diskon (","percentage"===e.discountType?"".concat(e.discount,"%"):(0,h.xG)(e.discount),"):"]}),(0,s.jsxs)("span",{children:["-",(0,h.xG)(e.price*e.quantity-a)]})]})]},e.productId)})}),(0,s.jsx)("div",{className:"border-t border-dashed border-gray-400 my-3"}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{children:"Subtotal:"}),(0,s.jsx)("span",{children:(0,h.xG)(r)})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{children:"Pajak (10%):"}),(0,s.jsx)("span",{children:(0,h.xG)(l)})]}),j&&(0,s.jsxs)("div",{className:"flex justify-between text-sm text-green-600",children:[(0,s.jsxs)("span",{children:["Diskon Transaksi (","percentage"===j.type?"".concat(j.value,"%"):(0,h.xG)(j.value),"):"]}),(0,s.jsxs)("span",{children:["-",(0,h.xG)("percentage"===j.type?(r+l)*j.value/100:j.value)]})]}),(0,s.jsxs)("div",{className:"flex justify-between font-bold text-base border-t border-gray-400 pt-2",children:[(0,s.jsx)("span",{children:"TOTAL:"}),(0,s.jsx)("span",{children:(0,h.xG)(d)})]})]}),(0,s.jsx)("div",{className:"border-t border-dashed border-gray-400 my-3"}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{children:"Metode:"}),(0,s.jsx)("span",{children:(e=>{switch(e){case"cash":case"tunai":return"Tunai";case"digital":case"xendit":case"e_wallet":return"E-Wallet / Digital";case"qris":return"QRIS";case"transfer_bank":return"Transfer Bank";case"kartu_debit":return"Kartu Debit";case"kartu_kredit":return"Kartu Kredit";default:return e}})(o)})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{children:"Dibayar:"}),(0,s.jsx)("span",{children:(0,h.xG)(x)})]}),m>0&&(0,s.jsxs)("div",{className:"flex justify-between text-sm font-bold text-green-600",children:[(0,s.jsx)("span",{children:"Kembalian:"}),(0,s.jsx)("span",{children:(0,h.xG)(m)})]})]}),(0,s.jsx)("div",{className:"border-t border-dashed border-gray-400 my-3"}),(0,s.jsxs)("div",{className:"text-center text-xs text-gray-600",children:[(0,s.jsx)("p",{children:"Terima kasih atas kunjungan Anda!"}),(0,s.jsx)("p",{children:"Barang yang sudah dibeli tidak dapat dikembalikan"}),(0,s.jsx)("p",{className:"mt-2",children:"www.familystore.com"})]})]})})]})}function L(e){let{items:a,onCheckout:t,isProcessing:i,showReceipt:r,transactionData:l,onNewTransaction:o}=e,[x,m]=(0,n.useState)(""),[p,b]=(0,n.useState)("cash"),[y,N]=(0,n.useState)(0),[k,w]=(0,n.useState)(0),[T,C]=(0,n.useState)(10),[_,D]=(0,n.useState)(!1),[S,I]=(0,n.useState)(""),[A,E]=(0,n.useState)(null),[z,R]=(0,n.useState)(!1),[P,X]=(0,n.useState)(0),[M,G]=(0,n.useState)("percentage"),V=e=>{let a=e.price*e.quantity;if(e.discount&&e.discountType){let t="percentage"===e.discountType?a*e.discount/100:e.discount;return Math.max(0,a-t)}return a},L=a.reduce((e,a)=>e+V(a),0),Z=Math.floor(T/100*L),q=L+Z,F=0;A&&(F="percentage"===A.type?Math.floor(q*A.value/100):Math.floor(A.value));let Q=Math.max(0,q-F),K=y-Q;k!==Q&&w(Q);let U=e=>{N(e)};return 0===a.length?(0,s.jsx)(c.Zb,{children:(0,s.jsx)(c.aY,{className:"p-6 text-center text-muted-foreground",children:(0,s.jsx)("p",{children:"Tambahkan produk ke keranjang untuk checkout"})})}):r&&l?(0,s.jsx)(B,{transactionCode:l.code,customerName:l.customerName,items:a,subtotal:L,tax:Z,total:Q,paymentMethod:l.paymentMethod,amountPaid:l.amountPaid,change:l.change,cashierName:l.cashierName,transactionDate:l.transactionDate,transactionDiscount:A||void 0,onNewTransaction:o}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(c.Zb,{children:[(0,s.jsx)(c.Ol,{children:(0,s.jsx)(c.ll,{children:"Checkout"})}),(0,s.jsx)(c.aY,{children:(0,s.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),0!==a.length){if("cash"!==p){I("TXN".concat(Date.now())),D(!0);return}"cash"===p&&y<Q||t(x||"Walk-in Customer",p,y,A||void 0)}},className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(g._,{htmlFor:"customer",children:"Nama Pelanggan (Opsional)"}),(0,s.jsx)(d.I,{id:"customer",value:x,onChange:e=>m(e.target.value),placeholder:"Masukkan nama pelanggan"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(g._,{children:"Metode Pembayaran"}),(0,s.jsxs)(v.Ph,{value:p,onValueChange:b,children:[(0,s.jsx)(v.i4,{children:(0,s.jsx)(v.ki,{})}),(0,s.jsxs)(v.Bw,{children:[(0,s.jsx)(v.Ql,{value:"cash",children:"Tunai"}),(0,s.jsx)(v.Ql,{value:"digital",children:"Pembayaran Digital"})]})]})]}),(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(g._,{children:"Diskon Transaksi"}),A?(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-sm text-green-600",children:"percentage"===A.type?"".concat(A.value,"%"):(0,h.xG)(A.value)}),(0,s.jsx)(u.z,{type:"button",variant:"ghost",size:"sm",onClick:()=>{E(null)},className:"h-6 w-6 p-0 text-red-500",children:"\xd7"})]}):(0,s.jsx)(u.z,{type:"button",variant:"outline",size:"sm",onClick:()=>R(!0),children:"Tambah Diskon"})]})}),"cash"===p&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(g._,{htmlFor:"amount",children:"Jumlah Dibayar"}),(0,s.jsx)(d.I,{id:"amount",type:"text",value:0===y?"":y.toString(),onChange:e=>N(Number.parseFloat(e.target.value)||0),placeholder:"0",min:Q}),(0,s.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[[5e4,1e5,2e5,5e5].map(e=>(0,s.jsx)(u.z,{type:"button",variant:"outline",size:"sm",onClick:()=>U(e),children:(0,h.xG)(e)},e)),(0,s.jsx)(u.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{U(Q),N(Q)},children:"Pas"})]})]}),"cash"!==p&&(0,s.jsx)("div",{className:"bg-blue-50 p-3 rounded-lg",children:(0,s.jsx)("p",{className:"text-sm text-blue-700",children:"Pembayaran akan diproses melalui Xendit dengan berbagai metode seperti e-wallet (OVO, DANA, GoPay), virtual account, dan kartu kredit."})}),(0,s.jsx)(f.Z,{}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{children:"Subtotal:"}),(0,s.jsx)("span",{children:(0,h.xG)(L)})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{children:"Pajak:"}),(0,s.jsx)("span",{children:(0,h.xG)(Z)})]}),A&&(0,s.jsxs)("div",{className:"flex justify-between text-sm text-green-600",children:[(0,s.jsx)("span",{children:"Diskon Transaksi:"}),(0,s.jsxs)("span",{children:["-",(0,h.xG)(F)]})]}),(0,s.jsxs)("div",{className:"flex justify-between font-bold",children:[(0,s.jsx)("span",{children:"Total:"}),(0,s.jsx)("span",{children:(0,h.xG)(Q)})]}),"cash"===p&&y>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{children:"Dibayar:"}),(0,s.jsx)("span",{children:(0,h.xG)(y)})]}),(0,s.jsxs)("div",{className:"flex justify-between font-bold text-green-600",children:[(0,s.jsx)("span",{children:"Kembalian:"}),(0,s.jsx)("span",{children:(0,h.xG)(Math.max(0,K))})]})]})]}),(0,s.jsx)(u.z,{type:"submit",className:"w-full",disabled:i||0===a.length||"cash"===p&&y<Q,children:i?"Memproses...":"cash"!==p?"Lanjut ke Pembayaran Digital":"Proses Pembayaran"})]})})]}),(0,s.jsx)(O,{isOpen:_,onClose:()=>D(!1),amount:Q,onPaymentSuccess:e=>{var a;let s=(null==e?void 0:null===(a=e.payment_method)||void 0===a?void 0:a.type)||(null==e?void 0:e.channel)||"QRIS",n="qris";switch(s){case"QRIS":default:n="qris";break;case"EWALLET":n="e_wallet";break;case"VIRTUAL_ACCOUNT":n="transfer_bank";break;case"CARD":case"CREDIT_CARD":n="kartu_kredit"}t(x||"Walk-in Customer",n,Q,A||void 0),D(!1)},transactionId:S}),(0,s.jsx)(j.Vq,{open:z,onOpenChange:R,children:(0,s.jsxs)(j.cZ,{children:[(0,s.jsx)(j.fK,{children:(0,s.jsx)(j.$N,{children:"Atur Diskon Transaksi"})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(g._,{children:"Tipe Diskon"}),(0,s.jsxs)(v.Ph,{value:M,onValueChange:e=>G(e),children:[(0,s.jsx)(v.i4,{children:(0,s.jsx)(v.ki,{})}),(0,s.jsxs)(v.Bw,{children:[(0,s.jsx)(v.Ql,{value:"percentage",children:"Persentase (%)"}),(0,s.jsx)(v.Ql,{value:"fixed",children:"Nominal (Rp)"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(g._,{children:"Nilai Diskon"}),(0,s.jsx)(d.I,{type:"number",value:P,onChange:e=>X(Number.parseFloat(e.target.value)||0),placeholder:"0",min:"0",max:"percentage"===M?100:void 0})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)(u.z,{variant:"outline",onClick:()=>R(!1),children:"Batal"}),(0,s.jsx)(u.z,{onClick:()=>{E({type:M,value:P}),R(!1)},children:"Terapkan"})]})]})]})})]})}var Z=t(40090);function q(){let{user:e,isLoading:a}=(0,i.a)(),t=(0,r.useRouter)(),{toast:c}=(0,Z.pm)(),[d,o]=(0,n.useState)([]),[u,x]=(0,n.useState)(!1),[m,h]=(0,n.useState)(!1),[f,j]=(0,n.useState)(null);(0,n.useEffect)(()=>{a||e||t.push("/")},[e,a,t]);let g=e=>{o(a=>a.filter(a=>a.productId!==e))},v=()=>{o([])},b=async(a,t,s,n)=>{if(e){x(!0);try{console.log("[v0] Starting checkout process",{customerName:a,paymentMethod:t,amountPaid:s});let i=e=>{let a=e.price*e.quantity;if(e.discount&&e.discountType){let t="percentage"===e.discountType?a*e.discount/100:e.discount;return Math.max(0,a-t)}return a},r=d.reduce((e,a)=>e+i(a),0),l=Math.floor(.1*r),o=r+l,u=0;n&&(u="percentage"===n.type?Math.floor(o*n.value/100):Math.floor(n.value));let x=Math.max(0,o-u);"pas"===t&&(s=x);let m=s-x;console.log("[v0] Transaction calculations",{subtotal:r,tax:l,beforeDiscountTotal:o,transactionDiscountAmount:u,total:x,change:m});let p=await fetch("/api/transactions/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customer_name:a||"Walk-in Customer",total_amount:x,tax_amount:l,discount_amount:u,payment_amount:s,change_amount:m,payment_method:"cash"===t?"tunai":"digital"===t?"qris":t,cashier_id:e.id,items:d.map(e=>({product_id:e.productId,quantity:e.quantity,unit_price:e.price,total_price:(()=>{let a=e.price*e.quantity;if(e.discount&&e.discountType){let t="percentage"===e.discountType?a*e.discount/100:e.discount;return Math.max(0,a-t)}return a})(),discount:(()=>{let a=e.price*e.quantity;if(e.discount&&e.discountType){let t="percentage"===e.discountType?a*e.discount/100:e.discount;return Math.min(a,Math.max(0,t))}return 0})()}))})});if(!p.ok)throw Error("Failed to create transaction");let f=await p.json();if(!f.success)throw Error(f.details||"Transaction failed");let g=f.transaction;console.log("[v0] Transaction created successfully",g),j({code:g.transaction_code,customerName:a||"Walk-in Customer",paymentMethod:t,amountPaid:s,change:m,cashierName:e.name,transactionDate:new Date}),h(!0),c({title:"Transaksi berhasil!",description:"Kode transaksi: ".concat(g.transaction_code)}),v()}catch(e){console.error("[v0] Transaction error:",e),c({title:"Transaksi gagal",description:"Terjadi kesalahan saat memproses transaksi",variant:"destructive"})}finally{x(!1)}}};return a?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-2 text-gray-600",children:"Memuat..."})]})}):e?(0,s.jsx)(l.c,{title:"Kasir",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-full",children:[(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsx)(p,{onAddToCart:e=>{o(a=>{let t=a.find(a=>a.productId===e.id);return t?t.quantity>=e.stock?(c({title:"Stok tidak mencukupi",description:"Stok ".concat(e.name," hanya tersisa ").concat(e.stock),variant:"destructive"}),a):a.map(a=>a.productId===e.id?{...a,quantity:a.quantity+1,subtotal:(a.quantity+1)*a.price}:a):[...a,{productId:e.id,productName:e.name,quantity:1,price:e.price,subtotal:e.price}]}),c({title:"Produk ditambahkan",description:"".concat(e.name," ditambahkan ke keranjang")})}})}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(k,{items:d,onUpdateQuantity:(e,a)=>{if(0===a){g(e);return}o(t=>t.map(t=>t.productId===e?{...t,quantity:a,subtotal:a*t.price}:t))},onRemoveItem:g,onClearCart:v,onUpdateDiscount:(e,a,t)=>{o(s=>s.map(s=>s.productId===e?{...s,discount:a,discountType:t}:s))}}),(0,s.jsx)(L,{items:d,onCheckout:b,isProcessing:u,showReceipt:m,transactionData:f||void 0,onNewTransaction:()=>{h(!1),j(null),v()}})]})]})}):null}},99499:function(e,a,t){"use strict";t.d(a,{C:function(){return c}});var s=t(76287);t(99334);var n=t(53739),i=t(15437),r=t(73004);let l=(0,i.j)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:a,variant:t,asChild:i=!1,...c}=e,d=i?n.g7:"span";return(0,s.jsx)(d,{"data-slot":"badge",className:(0,r.cn)(l({variant:t}),a),...c})}},86297:function(e,a,t){"use strict";t.d(a,{$N:function(){return m},Be:function(){return h},Vq:function(){return l},cN:function(){return x},cZ:function(){return o},fK:function(){return u}});var s=t(76287);t(99334);var n=t(21007),i=t(95762),r=t(73004);function l(e){let{...a}=e;return(0,s.jsx)(n.fC,{"data-slot":"dialog",...a})}function c(e){let{...a}=e;return(0,s.jsx)(n.h_,{"data-slot":"dialog-portal",...a})}function d(e){let{className:a,...t}=e;return(0,s.jsx)(n.aV,{"data-slot":"dialog-overlay",className:(0,r.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...t})}function o(e){let{className:a,children:t,showCloseButton:l=!0,...o}=e;return(0,s.jsxs)(c,{"data-slot":"dialog-portal",children:[(0,s.jsx)(d,{}),(0,s.jsxs)(n.VY,{"data-slot":"dialog-content",className:(0,r.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...o,children:[t,l&&(0,s.jsxs)(n.x8,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,s.jsx)(i.Z,{}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function u(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"dialog-header",className:(0,r.cn)("flex flex-col gap-2 text-center sm:text-left",a),...t})}function x(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"dialog-footer",className:(0,r.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...t})}function m(e){let{className:a,...t}=e;return(0,s.jsx)(n.Dx,{"data-slot":"dialog-title",className:(0,r.cn)("text-lg leading-none font-semibold",a),...t})}function h(e){let{className:a,...t}=e;return(0,s.jsx)(n.dk,{"data-slot":"dialog-description",className:(0,r.cn)("text-muted-foreground text-sm",a),...t})}},88448:function(e,a,t){"use strict";t.d(a,{I:function(){return i}});var s=t(76287);t(99334);var n=t(73004);function i(e){let{className:a,type:t,...i}=e;return(0,s.jsx)("input",{type:t,"data-slot":"input",className:(0,n.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...i})}},91979:function(e,a,t){"use strict";t.d(a,{_:function(){return r}});var s=t(76287);t(99334);var n=t(77707),i=t(73004);function r(e){let{className:a,...t}=e;return(0,s.jsx)(n.f,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...t})}},30634:function(e,a,t){"use strict";t.d(a,{Bw:function(){return x},Ph:function(){return d},Ql:function(){return m},i4:function(){return u},ki:function(){return o}});var s=t(76287);t(99334);var n=t(19274),i=t(98937),r=t(2862),l=t(81477),c=t(73004);function d(e){let{...a}=e;return(0,s.jsx)(n.fC,{"data-slot":"select",...a})}function o(e){let{...a}=e;return(0,s.jsx)(n.B4,{"data-slot":"select-value",...a})}function u(e){let{className:a,size:t="default",children:r,...l}=e;return(0,s.jsxs)(n.xz,{"data-slot":"select-trigger","data-size":t,className:(0,c.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...l,children:[r,(0,s.jsx)(n.JO,{asChild:!0,children:(0,s.jsx)(i.Z,{className:"size-4 opacity-50"})})]})}function x(e){let{className:a,children:t,position:i="popper",...r}=e;return(0,s.jsx)(n.h_,{children:(0,s.jsxs)(n.VY,{"data-slot":"select-content",className:(0,c.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...r,children:[(0,s.jsx)(h,{}),(0,s.jsx)(n.l_,{className:(0,c.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),(0,s.jsx)(p,{})]})})}function m(e){let{className:a,children:t,...i}=e;return(0,s.jsxs)(n.ck,{"data-slot":"select-item",className:(0,c.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",a),...i,children:[(0,s.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,s.jsx)(n.wU,{children:(0,s.jsx)(r.Z,{className:"size-4"})})}),(0,s.jsx)(n.eT,{children:t})]})}function h(e){let{className:a,...t}=e;return(0,s.jsx)(n.u_,{"data-slot":"select-scroll-up-button",className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...t,children:(0,s.jsx)(l.Z,{className:"size-4"})})}function p(e){let{className:a,...t}=e;return(0,s.jsx)(n.$G,{"data-slot":"select-scroll-down-button",className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...t,children:(0,s.jsx)(i.Z,{className:"size-4"})})}},37432:function(e,a,t){"use strict";t.d(a,{Z:function(){return r}});var s=t(76287);t(99334);var n=t(86788),i=t(73004);function r(e){let{className:a,orientation:t="horizontal",decorative:r=!0,...l}=e;return(0,s.jsx)(n.f,{"data-slot":"separator",decorative:r,orientation:t,className:(0,i.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",a),...l})}},40090:function(e,a,t){"use strict";t.d(a,{pm:function(){return x}});var s=t(99334);let n=0,i=new Map,r=e=>{if(i.has(e))return;let a=setTimeout(()=>{i.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,a)},l=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=a;return t?r(t):e.toasts.forEach(e=>{r(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},c=[],d={toasts:[]};function o(e){d=l(d,e),c.forEach(e=>{e(d)})}function u(e){let{...a}=e,t=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>o({type:"DISMISS_TOAST",toastId:t});return o({type:"ADD_TOAST",toast:{...a,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function x(){let[e,a]=s.useState(d);return s.useEffect(()=>(c.push(a),()=>{let e=c.indexOf(a);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}}},function(e){e.O(0,[652,738,599,734,64,344,434,444,319,68,975,731,744],function(){return e(e.s=37002)}),_N_E=e.O()}]);
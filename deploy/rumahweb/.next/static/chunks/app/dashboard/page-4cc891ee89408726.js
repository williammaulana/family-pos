(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{76559:function(e,s,t){Promise.resolve().then(t.bind(t,41878))},41878:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return b}});var r=t(76287),a=t(99334),i=t(6124),n=t(42370),d=t(25753),l=t(71091),c=t(75971),o=t(73004);function u(e){let{title:s,value:t,growth:a,icon:i,iconBgColor:n}=e,u=a>0,x=a<0;return(0,r.jsx)(d.Zb,{className:"relative overflow-hidden",children:(0,r.jsx)(d.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:s}),(0,r.jsx)("p",{className:"text-2xl font-bold mt-2",children:t}),(0,r.jsxs)("div",{className:"flex items-center mt-2 text-sm",children:[u&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Z,{className:"h-4 w-4 text-green-600 mr-1"}),(0,r.jsxs)("span",{className:"text-green-600",children:["+",a,"%"]})]}),x&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Z,{className:"h-4 w-4 text-red-600 mr-1"}),(0,r.jsxs)("span",{className:"text-red-600",children:[a,"%"]})]}),0===a&&(0,r.jsx)("span",{className:"text-gray-500",children:"0%"}),(0,r.jsx)("span",{className:"text-muted-foreground ml-1",children:"vs kemarin"})]})]}),(0,r.jsx)("div",{className:(0,o.cn)("p-3 rounded-full",n),children:i})]})})})}var x=t(99499);function m(){let[e,s]=(0,a.useState)([]),[t,i]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/transactions?limit=5"),t=await e.json();t.success&&s(t.data||[])}catch(e){console.error("Error fetching recent transactions:",e)}finally{i(!1)}})()},[]),t)?(0,r.jsxs)(d.Zb,{children:[(0,r.jsx)(d.Ol,{children:(0,r.jsx)(d.ll,{children:"Transaksi Terakhir"})}),(0,r.jsx)(d.aY,{children:(0,r.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg animate-pulse",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-20 mb-2"}),(0,r.jsx)("div",{className:"h-3 bg-gray-200 rounded w-32 mb-1"}),(0,r.jsx)("div",{className:"h-3 bg-gray-200 rounded w-16"})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-24 mb-1"}),(0,r.jsx)("div",{className:"h-3 bg-gray-200 rounded w-16"})]})]},s))})})]}):(0,r.jsxs)(d.Zb,{children:[(0,r.jsx)(d.Ol,{children:(0,r.jsx)(d.ll,{children:"Transaksi Terakhir"})}),(0,r.jsx)(d.aY,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[e.map(e=>{var s;return(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)("span",{className:"font-medium",children:e.code}),(0,r.jsx)(x.C,{variant:"secondary",className:"bg-green-100 text-green-800",children:"completed"===e.status?"Completed":e.status})]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:e.customer_name}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(null===(s=e.items)||void 0===s?void 0:s.length)||0," items"]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"font-medium",children:(0,o.xG)(e.total)}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:(0,o.mr)(new Date(e.created_at))})]})]},e.id)}),0===e.length&&(0,r.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:(0,r.jsx)("p",{children:"Belum ada transaksi hari ini"})})]})})]})}var h=t(73730);function g(){let[e,s]=(0,a.useState)([]),[t,i]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/products/low-stock"),t=await e.json();s(t.data||[])}catch(e){console.error("Error fetching low stock products:",e)}finally{i(!1)}})()},[]),(0,r.jsxs)(d.Zb,{children:[(0,r.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between",children:[(0,r.jsx)(d.ll,{children:"Stok Menipis"}),(0,r.jsx)(h.Z,{className:"h-5 w-5 text-orange-500"})]}),(0,r.jsx)(d.aY,{children:(0,r.jsx)("div",{className:"space-y-4",children:t?[void 0,void 0].map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-red-50 animate-pulse",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-32 mb-2"}),(0,r.jsx)("div",{className:"h-3 bg-gray-200 rounded w-20"})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"h-6 bg-gray-200 rounded w-16 mb-1"}),(0,r.jsx)("div",{className:"h-3 bg-gray-200 rounded w-12"})]})]},s)):(0,r.jsxs)(r.Fragment,{children:[e.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-red-50",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"font-medium",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:e.category})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)(x.C,{variant:"destructive",className:"mb-1",children:["Stok: ",e.stock]}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Min: ",e.min_stock]})]})]},e.id)),0===e.length&&(0,r.jsx)("p",{className:"text-center text-muted-foreground py-4",children:"Tidak ada produk dengan stok menipis"})]})})})]})}var j=t(52309),v=t(20343),f=t(15859),p=t(15184);function b(){let{user:e,isLoading:s}=(0,i.a)(),t=(0,p.useRouter)(),[d,c]=(0,a.useState)(null),[x,h]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{s||e||t.push("/")},[e,s,t]),(0,a.useEffect)(()=>{let s=async()=>{try{let e=await fetch("/api/dashboard/stats"),s=await e.json();c(s.data)}catch(e){console.error("Error fetching dashboard stats:",e)}finally{h(!1)}};e&&s()},[e]),s)?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-2 text-gray-600",children:"Memuat..."})]})}):e?(0,r.jsx)(n.c,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:x?[void 0,void 0,void 0,void 0].map((e,s)=>(0,r.jsx)("div",{className:"bg-white p-6 rounded-lg border animate-pulse",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-32"}),(0,r.jsx)("div",{className:"h-8 bg-gray-200 rounded w-24"}),(0,r.jsx)("div",{className:"h-3 bg-gray-200 rounded w-20"})]}),(0,r.jsx)("div",{className:"h-12 w-12 bg-gray-200 rounded-full"})]})},s)):d?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u,{title:"Total Penjualan Hari Ini",value:(0,o.xG)(d.totalSales),growth:d.salesGrowth,icon:(0,r.jsx)(j.Z,{className:"h-6 w-6 text-white"}),iconBgColor:"bg-green-500"}),(0,r.jsx)(u,{title:"Produk Terjual",value:d.productsSold.toLocaleString("id-ID"),growth:d.productsGrowth,icon:(0,r.jsx)(v.Z,{className:"h-6 w-6 text-white"}),iconBgColor:"bg-blue-500"}),(0,r.jsx)(u,{title:"Stok Tersedia",value:d.availableStock.toLocaleString("id-ID"),growth:d.stockGrowth,icon:(0,r.jsx)(f.Z,{className:"h-6 w-6 text-white"}),iconBgColor:"bg-purple-500"}),(0,r.jsx)(u,{title:"Transaksi Hari Ini",value:d.todayTransactions.toLocaleString("id-ID"),growth:d.transactionsGrowth,icon:(0,r.jsx)(l.Z,{className:"h-6 w-6 text-white"}),iconBgColor:"bg-orange-500"})]}):(0,r.jsx)("div",{className:"col-span-4 text-center py-8 text-muted-foreground",children:(0,r.jsx)("p",{children:"Gagal memuat statistik dashboard"})})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsx)(m,{}),(0,r.jsx)(g,{})]})]})}):null}},99499:function(e,s,t){"use strict";t.d(s,{C:function(){return l}});var r=t(76287);t(99334);var a=t(53739),i=t(15437),n=t(73004);let d=(0,i.j)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:s,variant:t,asChild:i=!1,...l}=e,c=i?a.g7:"span";return(0,r.jsx)(c,{"data-slot":"badge",className:(0,n.cn)(d({variant:t}),s),...l})}},52309:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(67137).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},75971:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(67137).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},71091:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(67137).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},73730:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(67137).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])}},function(e){e.O(0,[734,64,344,68,975,731,744],function(){return e(e.s=76559)}),_N_E=e.O()}]);
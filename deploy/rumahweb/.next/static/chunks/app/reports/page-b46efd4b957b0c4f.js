(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[882],{8801:function(e,t,a){Promise.resolve().then(a.bind(a,83569))},83569:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return M}});var s=a(76287),r=a(99334),l=a(6124),n=a(15184),i=a(42370),o=a(25753),c=a(15046),d=a(30634),h=a(85295),x=a(69922),m=a(99586),u=a(56991),j=a(84270),p=a(46912),f=a(93468),g=a(77349),y=a(62483),v=a(73004),S=a(16543),b=a(71091),N=a(32815);function k(){let[e,t]=(0,r.useState)([]),[a,l]=(0,r.useState)(!0),[n,i]=(0,r.useState)("7"),[k,w]=(0,r.useState)("line"),T=[{value:"7",label:"7 Hari Terakhir"},{value:"30",label:"30 Hari Terakhir"},{value:"90",label:"3 Bulan Terakhir"},{value:"365",label:"1 Tahun Terakhir"}];(0,r.useEffect)(()=>{(async()=>{l(!0);try{let e=await fetch("/api/reports/sales?days=".concat(Number.parseInt(n))),a=await e.json();t(a.data||[])}catch(e){console.error("Error fetching sales data:",e)}finally{l(!1)}})()},[n]);let C=(e,t)=>"totalSales"===t?[(0,v.xG)(e),"Total Penjualan"]:[e.toLocaleString("id-ID"),"totalTransactions"===t?"Transaksi":t];return a?(0,s.jsxs)(o.Zb,{children:[(0,s.jsxs)(o.Ol,{children:[(0,s.jsx)(o.ll,{children:"Tren Penjualan 7 Hari Terakhir"}),(0,s.jsx)(o.SZ,{children:"Grafik penjualan dan jumlah transaksi harian"})]}),(0,s.jsx)(o.aY,{children:(0,s.jsx)("div",{className:"h-80 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-2 text-gray-600",children:"Memuat data penjualan..."})]})})})]}):(0,s.jsxs)(o.Zb,{children:[(0,s.jsx)(o.Ol,{children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(S.Z,{className:"h-5 w-5"}),"Tren Penjualan"]}),(0,s.jsx)(o.SZ,{children:(()=>{let e=T.find(e=>e.value===n);return(null==e?void 0:e.label)||"7 Hari Terakhir"})()})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(d.Ph,{value:n,onValueChange:i,children:[(0,s.jsx)(d.i4,{className:"w-48",children:(0,s.jsx)(d.ki,{})}),(0,s.jsx)(d.Bw,{children:T.map(e=>(0,s.jsx)(d.Ql,{value:e.value,children:e.label},e.value))})]}),(0,s.jsxs)("div",{className:"flex border rounded-md",children:[(0,s.jsx)(c.z,{variant:"line"===k?"default":"ghost",size:"sm",onClick:()=>w("line"),className:"rounded-r-none",children:(0,s.jsx)(b.Z,{className:"h-4 w-4"})}),(0,s.jsx)(c.z,{variant:"bar"===k?"default":"ghost",size:"sm",onClick:()=>w("bar"),className:"rounded-l-none",children:(0,s.jsx)(N.Z,{className:"h-4 w-4"})})]})]})]})}),(0,s.jsx)(o.aY,{children:(0,s.jsx)("div",{className:"h-80",children:e.length>0?(0,s.jsx)(y.h,{width:"100%",height:"100%",children:"bar"===k?(0,s.jsxs)(h.v,{data:e,children:[(0,s.jsx)(x.q,{strokeDasharray:"3 3"}),(0,s.jsx)(m.K,{dataKey:"date",tickFormatter:e=>new Date(e).toLocaleDateString("id-ID",{day:"2-digit",month:"short"})}),(0,s.jsx)(u.B,{yAxisId:"sales",orientation:"left",tickFormatter:e=>"".concat(e/1e6,"M")}),(0,s.jsx)(u.B,{yAxisId:"transactions",orientation:"right"}),(0,s.jsx)(j.u,{formatter:C}),(0,s.jsx)(p.$,{yAxisId:"sales",dataKey:"totalSales",fill:"#3b82f6",name:"totalSales"}),(0,s.jsx)(p.$,{yAxisId:"transactions",dataKey:"totalTransactions",fill:"#10b981",name:"totalTransactions"})]}):(0,s.jsxs)(f.w,{data:e,children:[(0,s.jsx)(x.q,{strokeDasharray:"3 3"}),(0,s.jsx)(m.K,{dataKey:"date",tickFormatter:e=>new Date(e).toLocaleDateString("id-ID",{day:"2-digit",month:"short"})}),(0,s.jsx)(u.B,{yAxisId:"sales",orientation:"left",tickFormatter:e=>"".concat(e/1e6,"M")}),(0,s.jsx)(u.B,{yAxisId:"transactions",orientation:"right"}),(0,s.jsx)(j.u,{formatter:C}),(0,s.jsx)(g.x,{yAxisId:"sales",type:"monotone",dataKey:"totalSales",stroke:"#3b82f6",strokeWidth:2,name:"totalSales"}),(0,s.jsx)(g.x,{yAxisId:"transactions",type:"monotone",dataKey:"totalTransactions",stroke:"#10b981",strokeWidth:2,name:"totalTransactions"})]})}):(0,s.jsx)("div",{className:"h-full flex items-center justify-center text-muted-foreground",children:(0,s.jsx)("p",{children:"Belum ada data penjualan untuk ditampilkan"})})})})]})}var w=a(30139),T=a(99499);function C(){let[e,t]=(0,r.useState)([]),[a,l]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/reports/product-performance"),a=[...(await e.json()).data||[]].sort((e,t)=>t.revenue-e.revenue);t(a)}catch(e){console.error("Error fetching product performance:",e)}finally{l(!1)}})()},[]),a)?(0,s.jsxs)(o.Zb,{children:[(0,s.jsxs)(o.Ol,{children:[(0,s.jsx)(o.ll,{children:"Performa Produk"}),(0,s.jsx)(o.SZ,{children:"Produk terlaris berdasarkan revenue bulan ini"})]}),(0,s.jsx)(o.aY,{children:(0,s.jsxs)(w.iA,{children:[(0,s.jsx)(w.xD,{children:(0,s.jsxs)(w.SC,{children:[(0,s.jsx)(w.ss,{children:"Produk"}),(0,s.jsx)(w.ss,{children:"Kategori"}),(0,s.jsx)(w.ss,{className:"text-right",children:"Terjual"}),(0,s.jsx)(w.ss,{className:"text-right",children:"Revenue"}),(0,s.jsx)(w.ss,{className:"text-right",children:"Profit"})]})}),(0,s.jsx)(w.RM,{children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsxs)(w.SC,{children:[(0,s.jsx)(w.pj,{children:(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-32 animate-pulse"})}),(0,s.jsx)(w.pj,{children:(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-20 animate-pulse"})}),(0,s.jsx)(w.pj,{className:"text-right",children:(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-16 animate-pulse ml-auto"})}),(0,s.jsx)(w.pj,{className:"text-right",children:(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-24 animate-pulse ml-auto"})}),(0,s.jsx)(w.pj,{className:"text-right",children:(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-20 animate-pulse ml-auto"})})]},t))})]})})]}):(0,s.jsxs)(o.Zb,{children:[(0,s.jsxs)(o.Ol,{children:[(0,s.jsx)(o.ll,{children:"Performa Produk"}),(0,s.jsx)(o.SZ,{children:"Produk terlaris berdasarkan revenue bulan ini"})]}),(0,s.jsx)(o.aY,{children:(0,s.jsxs)(w.iA,{children:[(0,s.jsx)(w.xD,{children:(0,s.jsxs)(w.SC,{children:[(0,s.jsx)(w.ss,{children:"Produk"}),(0,s.jsx)(w.ss,{children:"Kategori"}),(0,s.jsx)(w.ss,{className:"text-right",children:"Terjual"}),(0,s.jsx)(w.ss,{className:"text-right",children:"Revenue"}),(0,s.jsx)(w.ss,{className:"text-right",children:"Profit"})]})}),(0,s.jsx)(w.RM,{children:e.length>0?e.map((e,t)=>(0,s.jsxs)(w.SC,{children:[(0,s.jsx)(w.pj,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-medium",children:e.productName}),t<3&&(0,s.jsxs)(T.C,{variant:0===t?"default":"secondary",children:["#",t+1]})]})}),(0,s.jsx)(w.pj,{children:e.category}),(0,s.jsx)(w.pj,{className:"text-right font-medium",children:e.totalSold.toLocaleString("id-ID")}),(0,s.jsx)(w.pj,{className:"text-right font-medium text-green-600",children:(0,v.xG)(e.revenue)}),(0,s.jsx)(w.pj,{className:"text-right font-medium text-blue-600",children:(0,v.xG)(e.profit)})]},e.productId)):(0,s.jsx)(w.SC,{children:(0,s.jsx)(w.pj,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:"Belum ada data performa produk"})})})]})})]})}function D(){let[e,t]=(0,r.useState)([]),[a,l]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{try{let[e,a]=await Promise.all([fetch("/api/products"),fetch("/api/products/low-stock")]),s=((await e.json()).data||[]).map(e=>{let t="normal";return 0===e.stock?t="out":e.stock<=e.min_stock&&(t="low"),{productId:e.id,productName:e.name,category:e.category,currentStock:e.stock,minStock:e.min_stock,status:t,lastRestocked:new Date(e.updated_at||e.created_at)}});t(s)}catch(e){console.error("Error fetching stock reports:",e)}finally{l(!1)}})()},[]);let n=e=>{switch(e){case"low":return(0,s.jsx)(T.C,{variant:"destructive",children:"Menipis"});case"out":return(0,s.jsx)(T.C,{variant:"destructive",children:"Habis"});default:return(0,s.jsx)(T.C,{variant:"default",children:"Normal"})}};return(0,s.jsxs)(o.Zb,{children:[(0,s.jsxs)(o.Ol,{children:[(0,s.jsx)(o.ll,{children:"Status Stok"}),(0,s.jsx)(o.SZ,{children:"Monitoring stok produk dan alert stok menipis"})]}),(0,s.jsx)(o.aY,{children:(0,s.jsxs)(w.iA,{children:[(0,s.jsx)(w.xD,{children:(0,s.jsxs)(w.SC,{children:[(0,s.jsx)(w.ss,{children:"Produk"}),(0,s.jsx)(w.ss,{children:"Kategori"}),(0,s.jsx)(w.ss,{className:"text-right",children:"Stok Saat Ini"}),(0,s.jsx)(w.ss,{className:"text-right",children:"Stok Minimum"}),(0,s.jsx)(w.ss,{children:"Status"}),(0,s.jsx)(w.ss,{children:"Terakhir Restock"})]})}),(0,s.jsx)(w.RM,{children:a?(0,s.jsx)(w.SC,{children:(0,s.jsxs)(w.pj,{colSpan:6,className:"text-center py-8",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Memuat data stok..."})]})}):0===e.length?(0,s.jsx)(w.SC,{children:(0,s.jsx)(w.pj,{colSpan:6,className:"text-center py-8 text-gray-500",children:"Tidak ada data stok"})}):e.map(e=>(0,s.jsxs)(w.SC,{children:[(0,s.jsx)(w.pj,{className:"font-medium",children:e.productName}),(0,s.jsx)(w.pj,{children:e.category}),(0,s.jsx)(w.pj,{className:"text-right",children:e.currentStock}),(0,s.jsx)(w.pj,{className:"text-right",children:e.minStock}),(0,s.jsx)(w.pj,{children:n(e.status)}),(0,s.jsx)(w.pj,{children:e.lastRestocked.toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"})})]},e.productId))})]})})]})}var A=a(75971),P=a(52309);function O(){let[e,t]=(0,r.useState)([]),[a,l]=(0,r.useState)(!0),[n,i]=(0,r.useState)("monthly");(0,r.useEffect)(()=>{(async()=>{l(!0);try{let e=30;switch(n){case"daily":e=7;break;case"weekly":e=28;break;case"monthly":e=90;break;case"yearly":e=365}let a=await fetch("/api/reports/sales?days=".concat(e)),s=(await a.json()).data||[],r=[];if("daily"===n)r=s.map((e,t)=>({period:new Date(e.date).toLocaleDateString("id-ID",{day:"2-digit",month:"short"}),totalSales:e.totalSales,totalTransactions:e.totalTransactions,averageTransaction:e.averageTransaction,growth:t>0?(e.totalSales-s[t-1].totalSales)/s[t-1].totalSales*100:0}));else if("weekly"===n){let e=s.reduce((e,t)=>{let a=new Date(t.date);a.setDate(a.getDate()-a.getDay());let s=a.toISOString().split("T")[0];return e[s]||(e[s]={totalSales:0,totalTransactions:0,dates:[]}),e[s].totalSales+=t.totalSales,e[s].totalTransactions+=t.totalTransactions,e[s].dates.push(t.date),e},{});r=Object.entries(e).map((t,a)=>{let[s,r]=t;return{period:"Minggu ".concat(a+1),totalSales:r.totalSales,totalTransactions:r.totalTransactions,averageTransaction:r.totalSales/r.totalTransactions,growth:a>0?(r.totalSales-Object.values(e)[a-1].totalSales)/Object.values(e)[a-1].totalSales*100:0}})}else if("monthly"===n){let e=s.reduce((e,t)=>{let a=t.date.substring(0,7);return e[a]||(e[a]={totalSales:0,totalTransactions:0}),e[a].totalSales+=t.totalSales,e[a].totalTransactions+=t.totalTransactions,e},{});r=Object.entries(e).map((t,a)=>{let[s,r]=t;return{period:new Date(s+"-01").toLocaleDateString("id-ID",{month:"short",year:"numeric"}),totalSales:r.totalSales,totalTransactions:r.totalTransactions,averageTransaction:r.totalSales/r.totalTransactions,growth:a>0?(r.totalSales-Object.values(e)[a-1].totalSales)/Object.values(e)[a-1].totalSales*100:0}})}else if("yearly"===n){let e=s.reduce((e,t)=>{let a=t.date.substring(0,4);return e[a]||(e[a]={totalSales:0,totalTransactions:0}),e[a].totalSales+=t.totalSales,e[a].totalTransactions+=t.totalTransactions,e},{});r=Object.entries(e).map((t,a)=>{let[s,r]=t;return{period:s,totalSales:r.totalSales,totalTransactions:r.totalTransactions,averageTransaction:r.totalSales/r.totalTransactions,growth:a>0?(r.totalSales-Object.values(e)[a-1].totalSales)/Object.values(e)[a-1].totalSales*100:0}})}t(r)}catch(e){console.error("Error fetching revenue data:",e)}finally{l(!1)}})()},[n]);let c=e=>e>0?(0,s.jsx)(b.Z,{className:"h-4 w-4 text-green-500"}):e<0?(0,s.jsx)(A.Z,{className:"h-4 w-4 text-red-500"}):(0,s.jsx)(P.Z,{className:"h-4 w-4 text-gray-500"}),h=e=>e>0?"text-green-600":e<0?"text-red-600":"text-gray-600",x=e=>e>0?"default":e<0?"destructive":"secondary";return a?(0,s.jsxs)(o.Zb,{children:[(0,s.jsxs)(o.Ol,{children:[(0,s.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(S.Z,{className:"h-5 w-5"}),"Breakdown Pendapatan"]}),(0,s.jsx)(o.SZ,{children:"Analisis pendapatan berdasarkan periode"})]}),(0,s.jsx)(o.aY,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"h-10 bg-gray-200 rounded animate-pulse"}),(0,s.jsx)("div",{className:"space-y-2",children:[...Array(6)].map((e,t)=>(0,s.jsx)("div",{className:"h-16 bg-gray-200 rounded animate-pulse"},t))})]})})]}):(0,s.jsxs)(o.Zb,{children:[(0,s.jsx)(o.Ol,{children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(S.Z,{className:"h-5 w-5"}),"Breakdown Pendapatan"]}),(0,s.jsx)(o.SZ,{children:"Analisis pendapatan berdasarkan periode"})]}),(0,s.jsxs)(d.Ph,{value:n,onValueChange:i,children:[(0,s.jsx)(d.i4,{className:"w-32",children:(0,s.jsx)(d.ki,{})}),(0,s.jsx)(d.Bw,{children:[{value:"daily",label:"Harian"},{value:"weekly",label:"Mingguan"},{value:"monthly",label:"Bulanan"},{value:"yearly",label:"Tahunan"}].map(e=>(0,s.jsx)(d.Ql,{value:e.value,children:e.label},e.value))})]})]})}),(0,s.jsx)(o.aY,{children:(0,s.jsx)("div",{className:"space-y-4",children:e.length>0?(0,s.jsxs)(w.iA,{children:[(0,s.jsx)(w.xD,{children:(0,s.jsxs)(w.SC,{children:[(0,s.jsx)(w.ss,{children:"Periode"}),(0,s.jsx)(w.ss,{className:"text-right",children:"Total Penjualan"}),(0,s.jsx)(w.ss,{className:"text-right",children:"Transaksi"}),(0,s.jsx)(w.ss,{className:"text-right",children:"Rata-rata"}),(0,s.jsx)(w.ss,{className:"text-right",children:"Pertumbuhan"})]})}),(0,s.jsx)(w.RM,{children:e.map((e,t)=>(0,s.jsxs)(w.SC,{children:[(0,s.jsx)(w.pj,{className:"font-medium",children:e.period}),(0,s.jsx)(w.pj,{className:"text-right font-semibold",children:(0,v.xG)(e.totalSales)}),(0,s.jsx)(w.pj,{className:"text-right",children:e.totalTransactions.toLocaleString("id-ID")}),(0,s.jsx)(w.pj,{className:"text-right",children:(0,v.xG)(e.averageTransaction)}),(0,s.jsx)(w.pj,{className:"text-right",children:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[c(e.growth),(0,s.jsx)(T.C,{variant:x(e.growth),children:(0,s.jsxs)("span",{className:h(e.growth),children:[e.growth>0?"+":"",e.growth.toFixed(1),"%"]})})]})})]},e.period))})]}):(0,s.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:(0,s.jsx)("p",{children:"Belum ada data pendapatan untuk ditampilkan"})})})})]})}var I=a(40090),E=a(7948),Z=a(20343),R=a(15859),B=a(73730),L=a(28162),F=a(10520);function M(){let{user:e,isLoading:t}=(0,l.a)(),a=(0,n.useRouter)(),{toast:d}=(0,I.pm)(),[h,x]=(0,r.useState)({totalSales7Days:0,totalTransactions7Days:0,totalRevenue:0,topProduct:{name:"",totalSold:0},lowStockCount:0}),[m,u]=(0,r.useState)(!0);(0,r.useEffect)(()=>{t||e||a.push("/"),!t&&e&&"kasir"===e.role&&(a.push("/dashboard"),d({title:"Akses Ditolak",description:"Anda tidak memiliki akses ke halaman reports",variant:"destructive"}))},[e,t,a,d]),(0,r.useEffect)(()=>{let t=async()=>{try{let[e,t,a]=await Promise.all([fetch("/api/reports/sales?days=7"),fetch("/api/reports/product-performance"),fetch("/api/products/low-stock")]),[s,r,l]=await Promise.all([e.json(),t.json(),a.json()]),n=s.data||[],i=r.data||[],o=l.data||[],c=n.reduce((e,t)=>e+t.totalSales,0),d=n.reduce((e,t)=>e+t.totalTransactions,0),h=i.reduce((e,t)=>e+t.revenue,0),m=[...i].sort((e,t)=>t.revenue-e.revenue)[0]||{productName:"Tidak ada",totalSold:0};x({totalSales7Days:c,totalTransactions7Days:d,totalRevenue:h,topProduct:{name:m.productName,totalSold:m.totalSold},lowStockCount:o.length})}catch(e){console.error("Error fetching report stats:",e)}finally{u(!1)}};e&&"kasir"!==e.role&&t()},[e]);let j=async e=>{try{let[t,a,s]=await Promise.all([fetch("/api/reports/sales?days=30"),fetch("/api/reports/product-performance"),fetch("/api/products/low-stock")]),[r,l,n]=await Promise.all([t.json().then(e=>e.data||[]),a.json().then(e=>e.data||[]),s.json().then(e=>e.data||[])]);if("json"===e){let e={salesData:r,productPerformance:l,lowStockProducts:n,generatedAt:new Date().toISOString()};(0,L.cs)(e,"reports-".concat(new Date().toISOString().split("T")[0]))}else{let t={headers:["Type","Name","Value","Date"],rows:[...r.map(e=>["Sales",e.date,e.totalSales,e.date]),...l.map(e=>["Product Performance",e.productName,e.revenue,new Date().toISOString().split("T")[0]]),...n.map(e=>["Low Stock Alert",e.name,e.stock,new Date().toISOString().split("T")[0]])],filename:"reports-".concat(new Date().toISOString().split("T")[0])};"csv"===e?(0,L.GS)(t):(0,L.pq)(t)}d({title:"Export Berhasil",description:"Laporan berhasil diekspor dalam format ".concat(e.toUpperCase())})}catch(e){console.error("Export error:",e),d({title:"Export Gagal",description:"Terjadi kesalahan saat mengekspor laporan",variant:"destructive"})}};return t?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-2 text-gray-600",children:"Memuat..."})]})}):e&&"kasir"!==e.role?(0,s.jsx)(i.c,{title:"Laporan & Analisis",children:(0,s.jsxs)("div",{className:"space-y-4 md:space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl md:text-2xl font-bold",children:"Laporan & Analisis"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Analisis performa bisnis dan laporan penjualan"})]}),(0,s.jsxs)(F.h_,{children:[(0,s.jsx)(F.$F,{asChild:!0,children:(0,s.jsxs)(c.z,{variant:"outline",size:"sm",className:"flex items-center gap-2 bg-transparent",children:[(0,s.jsx)(E.Z,{className:"h-4 w-4"}),"Export Laporan"]})}),(0,s.jsxs)(F.AW,{align:"end",children:[(0,s.jsx)(F.Xi,{onClick:()=>j("excel"),children:"Export Excel (.xlsx)"}),(0,s.jsx)(F.Xi,{onClick:()=>j("csv"),children:"Export CSV"}),(0,s.jsx)(F.Xi,{onClick:()=>j("json"),children:"Export JSON"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4",children:[(0,s.jsxs)(o.Zb,{children:[(0,s.jsxs)(o.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(o.ll,{className:"text-sm font-medium",children:"Penjualan 7 Hari"}),(0,s.jsx)(b.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsx)(o.aY,{children:m?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"h-8 bg-gray-200 rounded animate-pulse"}),(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-24 animate-pulse"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:(0,v.xG)(h.totalSales7Days)}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[h.totalTransactions7Days," transaksi"]})]})})]}),(0,s.jsxs)(o.Zb,{children:[(0,s.jsxs)(o.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(o.ll,{className:"text-sm font-medium",children:"Total Revenue"}),(0,s.jsx)(Z.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsx)(o.aY,{children:m?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"h-8 bg-gray-200 rounded animate-pulse"}),(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-16 animate-pulse"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:(0,v.xG)(h.totalRevenue)}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Semua waktu"})]})})]}),(0,s.jsxs)(o.Zb,{children:[(0,s.jsxs)(o.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(o.ll,{className:"text-sm font-medium",children:"Produk Terlaris"}),(0,s.jsx)(R.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsx)(o.aY,{children:m?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"h-8 bg-gray-200 rounded animate-pulse"}),(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-20 animate-pulse"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:h.topProduct.name}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[h.topProduct.totalSold," terjual"]})]})})]}),(0,s.jsxs)(o.Zb,{children:[(0,s.jsxs)(o.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(o.ll,{className:"text-sm font-medium",children:"Alert Stok"}),(0,s.jsx)(B.Z,{className:"h-4 w-4 text-orange-500"})]}),(0,s.jsx)(o.aY,{children:m?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"h-8 bg-gray-200 rounded animate-pulse"}),(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-32 animate-pulse"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:h.lowStockCount}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Produk perlu restock"})]})})]})]}),(0,s.jsx)(k,{}),(0,s.jsx)(O,{}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsx)(C,{}),(0,s.jsx)(D,{})]})]})}):null}},28162:function(e,t,a){"use strict";function s(e){let t=new Blob([[e.headers.join(","),...e.rows.map(e=>e.map(e=>"string"==typeof e&&e.includes(",")?'"'.concat(e.replace(/"/g,'""'),'"'):e).join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");if(void 0!==a.download){let s=URL.createObjectURL(t);a.setAttribute("href",s),a.setAttribute("download","".concat(e.filename,".csv")),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)}}function r(e,t){let a=new Blob([JSON.stringify(e,null,2)],{type:"application/json;charset=utf-8;"}),s=document.createElement("a");if(void 0!==s.download){let e=URL.createObjectURL(a);s.setAttribute("href",e),s.setAttribute("download","".concat(t,".json")),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)}}function l(e){let t=e.split("\n"),a=[];for(let e of t)if(e.trim()){let t=[],s="",r=!1;for(let a=0;a<e.length;a++){let l=e[a];'"'===l?r=!r:","!==l||r?s+=l:(t.push(s.trim()),s="")}t.push(s.trim()),a.push(t)}return a}function n(e){let t={SheetNames:["Sheet1"],Sheets:{Sheet1:{}}},a={};e.headers.forEach((e,t)=>{a[String.fromCharCode(65+t)+"1"]={v:e,t:"s"}}),e.rows.forEach((e,t)=>{e.forEach((e,s)=>{a[String.fromCharCode(65+s)+(t+2)]={v:e,t:"number"==typeof e?"n":"s"}})});let s="A1:".concat(String.fromCharCode(65+e.headers.length-1)).concat(e.rows.length+1);a["!ref"]=s,t.Sheets.Sheet1=a;let r=new Blob([function(e){let t=new ArrayBuffer(e.length),a=new Uint8Array(t);for(let t=0;t<e.length;t++)a[t]=255&e.charCodeAt(t);return t}(function(e){let t;let a=new Map;a.set("[Content_Types].xml",'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types">\n<Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/>\n<Default Extension="xml" ContentType="application/xml"/>\n<Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"/>\n<Override PartName="/xl/worksheets/sheet1.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"/>\n</Types>'),a.set("_rels/.rels",'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">\n<Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/>\n</Relationships>'),a.set("xl/_rels/workbook.xml.rels",'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">\n<Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet1.xml"/>\n</Relationships>'),a.set("xl/workbook.xml",'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main">\n<sheets><sheet name="Sheet1" sheetId="1" r:id="rId1" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"/></sheets>\n</workbook>');let s=e.Sheets.Sheet1,r="<sheetData>";if(s["!ref"]){let e=o(s["!ref"]);for(let t=e.s.r;t<=e.e.r;t++){r+='<row r="'.concat(t+1,'">');for(let a=e.s.c;a<=e.e.c;a++){let e=d({r:t,c:a}),l=s[e];if(l){let t="n"===l.t?"":' t="inlineStr"',a="n"===l.t?"<v>".concat(l.v,"</v>"):"<is><t>".concat(String(l.v).replace(/[<>&'"]/g,e=>{switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;";default:return e}}),"</t></is>");r+='<c r="'.concat(e,'"').concat(t,">").concat(a,"</c>")}}r+="</row>"}}return r+="</sheetData>",a.set("xl/worksheets/sheet1.xml",'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main">\n'.concat(r,"\n</worksheet>")),t="",a.forEach((e,a)=>{t+=e}),t}(t))],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),l=document.createElement("a");if(void 0!==l.download){let t=URL.createObjectURL(r);l.setAttribute("href",t),l.setAttribute("download","".concat(e.filename,".xlsx")),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)}}function i(e){return new Promise((t,a)=>{let s=new FileReader;s.onload=e=>{try{var s;new Uint8Array(null===(s=e.target)||void 0===s?void 0:s.result);let a={SheetNames:["Sheet1"],Sheets:{Sheet1:{"!ref":"A1:A1",A1:{v:"Sample",t:"s"}}}},r=a.SheetNames[0],l=a.Sheets[r],n=[],i=l["!ref"];if(!i){t([]);return}let c=o(i);for(let e=c.s.r;e<=c.e.r;e++){let t=[];for(let a=c.s.c;a<=c.e.c;a++){let s=l[d({r:e,c:a})];t.push(s?String(s.v):"")}n.push(t)}t(n)}catch(e){a(e)}},s.onerror=()=>a(Error("Failed to read file")),s.readAsArrayBuffer(e)})}function o(e){let t=e.split(":"),a=c(t[0]),s=t[1]?c(t[1]):a;return{s:a,e:s}}function c(e){let t=e.match(/([A-Z]+)(\d+)/);if(!t)return{r:0,c:0};let a=t[1].split("").reduce((e,t)=>26*e+t.charCodeAt(0)-64,0)-1;return{r:Number.parseInt(t[2])-1,c:a}}function d(e){let t="",a=e.c;for(;a>=0;)t=String.fromCharCode(65+a%26)+t,a=Math.floor(a/26)-1;return t+(e.r+1)}a.d(t,{GS:function(){return s},bW:function(){return l},cs:function(){return r},gY:function(){return i},pq:function(){return n}})}},function(e){e.O(0,[734,64,344,434,444,886,821,28,68,237,975,731,744],function(){return e(e.s=8801)}),_N_E=e.O()}]);
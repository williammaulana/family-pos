"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[68],{42370:function(e,t,r){r.d(t,{c:function(){return F}});var n=r(76287),a=r(73004),s=r(6124),o=r(15046),i=r(7813),l=r(36749),d=r(20343),c=r(57477),u=r(15859),m=r(48230),h=r(67539),x=r(64847),f=r(35818),g=r(11829),p=r(95676),v=r(30445),y=r(15184),b=r(29908),j=r(99334),w=r(21007),N=r(95762);function C(e){let{...t}=e;return(0,n.jsx)(w.fC,{"data-slot":"sheet",...t})}function S(e){let{...t}=e;return(0,n.jsx)(w.xz,{"data-slot":"sheet-trigger",...t})}function k(e){let{...t}=e;return(0,n.jsx)(w.h_,{"data-slot":"sheet-portal",...t})}function _(e){let{className:t,...r}=e;return(0,n.jsx)(w.aV,{"data-slot":"sheet-overlay",className:(0,a.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...r})}function z(e){let{className:t,children:r,side:s="right",...o}=e;return(0,n.jsxs)(k,{children:[(0,n.jsx)(_,{}),(0,n.jsxs)(w.VY,{"data-slot":"sheet-content",className:(0,a.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500","right"===s&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm","left"===s&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm","top"===s&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b","bottom"===s&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...o,children:[r,(0,n.jsxs)(w.x8,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[(0,n.jsx)(N.Z,{className:"size-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function Z(){let[e,t]=j.useState(void 0);return j.useEffect(()=>{let e=window.matchMedia("(max-width: ".concat(767,"px)")),r=()=>{t(window.innerWidth<768)};return e.addEventListener("change",r),t(window.innerWidth<768),()=>e.removeEventListener("change",r)},[]),!!e}let D=[{name:"Dashboard",href:"/dashboard",icon:l.Z,roles:["super_admin","admin","kasir"]},{name:"Point of Sale",href:"/pos",icon:d.Z,roles:["super_admin","admin","kasir"]},{name:"History Orders",href:"/orders",icon:c.Z,roles:["super_admin","admin","kasir"]},{name:"Inventory",href:"/inventory",icon:u.Z,roles:["super_admin","admin"]},{name:"Stock Adjustment",href:"/inventory/stock-adjustment",icon:m.Z,roles:["super_admin","admin"]},{name:"Reports",href:"/reports",icon:h.Z,roles:["super_admin","admin"]},{name:"Users",href:"/users",icon:x.Z,roles:["super_admin"]},{name:"Settings",href:"/settings",icon:f.Z,roles:["super_admin"]}];function I(e){let{onItemClick:t}=e,{user:r,logout:l}=(0,s.a)(),{settings:d}=(0,i.r)(),c=(0,y.usePathname)(),u=D.filter(e=>r&&e.roles.includes(r.role));return(0,n.jsxs)("div",{className:"flex h-full w-full flex-col text-white",style:{backgroundColor:"var(--primary-color, ".concat(d.primaryColor,")")},children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 p-6 border-b",style:{borderColor:"var(--secondary-color, ".concat(d.secondaryColor,")")},children:[(0,n.jsx)("div",{className:"bg-white p-2 rounded-lg",children:d.logo?(0,n.jsx)("img",{src:d.logo||"/placeholder.svg",alt:"Store logo",className:"h-6 w-6 object-contain"}):(0,n.jsx)(g.Z,{className:"h-6 w-6",style:{color:"var(--primary-color, ".concat(d.primaryColor,")")}})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"font-bold text-lg",children:d.storeName}),(0,n.jsx)("p",{className:"text-blue-200 text-sm",children:d.storeSubtitle})]})]}),(0,n.jsx)("nav",{className:"flex-1 p-4",children:(0,n.jsx)("ul",{className:"space-y-2",children:u.map(e=>{let r=c===e.href;return(0,n.jsx)("li",{children:(0,n.jsx)(b.default,{href:e.href,onClick:t,children:(0,n.jsxs)(o.z,{variant:r?"secondary":"ghost",className:(0,a.cn)("w-full justify-start gap-3 text-left",r?"text-white hover:opacity-90":"text-blue-100 hover:text-white hover:opacity-80"),style:r?{backgroundColor:"var(--secondary-color, ".concat(d.secondaryColor,")")}:{},children:[(0,n.jsx)(e.icon,{className:"h-5 w-5"}),e.name]})})},e.name)})})}),(0,n.jsxs)("div",{className:"p-4 border-t",style:{borderColor:"var(--secondary-color, ".concat(d.secondaryColor,")")},children:[(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("p",{className:"font-medium text-sm",children:null==r?void 0:r.name}),(0,n.jsx)("p",{className:"text-blue-200 text-xs capitalize",children:null==r?void 0:r.role.replace("_"," ")})]}),(0,n.jsxs)(o.z,{variant:"ghost",onClick:l,className:"w-full justify-start gap-3 text-blue-100 hover:text-white hover:opacity-80",children:[(0,n.jsx)(p.Z,{className:"h-4 w-4"}),"Keluar"]})]})]})}function P(){let e=Z(),[t,r]=(0,j.useState)(!1);return e?(0,n.jsxs)(C,{open:t,onOpenChange:r,children:[(0,n.jsx)(S,{asChild:!0,children:(0,n.jsx)(o.z,{variant:"ghost",size:"icon",className:"fixed top-4 left-4 z-50 md:hidden bg-white shadow-md",children:(0,n.jsx)(v.Z,{className:"h-5 w-5"})})}),(0,n.jsx)(z,{side:"left",className:"p-0 w-64",children:(0,n.jsx)(I,{onItemClick:()=>r(!1)})})]}):(0,n.jsx)("div",{className:"w-64",children:(0,n.jsx)(I,{})})}var E=r(39823),O=r(51562);function F(e){let{children:t,title:r}=e,{user:i}=(0,s.a)(),l=Z();return(0,n.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[!l&&(0,n.jsx)(P,{}),(0,n.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,n.jsx)("header",{className:"bg-white border-b border-gray-200 px-3 md:px-6 py-3 md:py-4",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:(0,a.cn)("",l&&"ml-10 md:ml-12"),children:[(0,n.jsx)("h1",{className:"text-lg md:text-xl lg:text-2xl font-bold text-gray-900 truncate",children:r||"Selamat Datang, ".concat(null==i?void 0:i.name,"!")}),(0,n.jsx)("p",{className:"text-xs md:text-sm text-gray-600",children:(0,a.p6)(new Date)})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1 md:gap-2 lg:gap-4",children:[(0,n.jsxs)(o.z,{variant:"ghost",size:"icon",className:"relative h-8 w-8 md:h-10 md:w-10",children:[(0,n.jsx)(E.Z,{className:"h-3 w-3 md:h-4 md:w-4 lg:h-5 lg:w-5"}),(0,n.jsx)("span",{className:"absolute -top-0.5 -right-0.5 md:-top-1 md:-right-1 bg-red-500 text-white text-[8px] md:text-[10px] lg:text-xs rounded-full h-3 w-3 md:h-4 md:w-4 lg:h-5 lg:w-5 flex items-center justify-center",children:"3"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1 md:gap-2 lg:gap-3",children:[(0,n.jsx)("div",{className:"bg-blue-600 p-1 md:p-1.5 lg:p-2 rounded-full",children:(0,n.jsx)(O.Z,{className:"h-3 w-3 md:h-4 md:w-4 lg:h-5 lg:w-5 text-white"})}),(0,n.jsxs)("div",{className:"text-right hidden sm:block",children:[(0,n.jsx)("p",{className:"font-medium text-xs md:text-sm truncate max-w-20 md:max-w-none",children:null==i?void 0:i.name}),(0,n.jsx)("p",{className:"text-[10px] md:text-xs text-gray-600 capitalize",children:null==i?void 0:i.role.replace("_"," ")})]})]})]})]})}),(0,n.jsx)("main",{className:"flex-1 overflow-auto p-3 md:p-4 lg:p-6",children:t}),l&&(0,n.jsx)(P,{})]})]})}},15046:function(e,t,r){r.d(t,{z:function(){return l}});var n=r(76287);r(99334);var a=r(53739),s=r(15437),o=r(73004);let i=(0,s.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:t,variant:r,size:s,asChild:l=!1,...d}=e,c=l?a.g7:"button";return(0,n.jsx)(c,{"data-slot":"button",className:(0,o.cn)(i({variant:r,size:s,className:t})),...d})}},25753:function(e,t,r){r.d(t,{Ol:function(){return o},SZ:function(){return l},Zb:function(){return s},aY:function(){return d},ll:function(){return i}});var n=r(76287);r(99334);var a=r(73004);function s(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}function o(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function i(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",t),...r})}function l(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",t),...r})}function d(e){let{className:t,...r}=e;return(0,n.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",t),...r})}},6124:function(e,t,r){r.d(t,{AuthProvider:function(){return o},a:function(){return i}});var n=r(76287),a=r(99334);let s=(0,a.createContext)(void 0);function o(e){let{children:t}=e,[r,o]=(0,a.useState)(null),[i,l]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=localStorage.getItem("pos_user");e&&o(JSON.parse(e)),l(!1)},[]);let d=async(e,t)=>{l(!0);try{let r=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!r.ok)return l(!1),!1;let n=await r.json();if(n.user)return o(n.user),localStorage.setItem("pos_user",JSON.stringify(n.user)),l(!1),!0;return l(!1),!1}catch(e){return l(!1),!1}};return(0,n.jsx)(s.Provider,{value:{user:r,login:d,logout:()=>{o(null),localStorage.removeItem("pos_user")},isLoading:i},children:t})}function i(){let e=(0,a.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},7813:function(e,t,r){r.d(t,{SettingsProvider:function(){return i},r:function(){return l}});var n=r(76287),a=r(99334);let s={logo:null,storeName:"Family Store",storeSubtitle:"POS & Inventory",primaryColor:"#1e40af",secondaryColor:"#1e3a8a"},o=(0,a.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,a.useState)(s);return(0,a.useEffect)(()=>{let e=localStorage.getItem("storeSettings");if(e){let t=JSON.parse(e);i({...s,...t}),document.documentElement.style.setProperty("--primary-color",t.primaryColor||s.primaryColor),document.documentElement.style.setProperty("--secondary-color",t.secondaryColor||s.secondaryColor)}},[]),(0,n.jsx)(o.Provider,{value:{settings:r,updateSettings:e=>{let t={...r,...e};i(t),localStorage.setItem("storeSettings",JSON.stringify(t)),e.primaryColor&&document.documentElement.style.setProperty("--primary-color",e.primaryColor),e.secondaryColor&&document.documentElement.style.setProperty("--secondary-color",e.secondaryColor)}},children:t})}function l(){let e=(0,a.useContext)(o);if(void 0===e)throw Error("useSettings must be used within a SettingsProvider");return e}},73004:function(e,t,r){r.d(t,{cn:function(){return s},mr:function(){return l},p6:function(){return i},xG:function(){return o}});var n=r(58256),a=r(65741);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}function o(e){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function i(e){let t=e instanceof Date?e:new Date(e);return new Intl.DateTimeFormat("id-ID",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)}function l(e){let t=e instanceof Date?e:new Date(e);return new Intl.DateTimeFormat("id-ID",{hour:"2-digit",minute:"2-digit"}).format(t)}}}]);
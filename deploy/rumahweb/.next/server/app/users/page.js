(()=>{var e={};e.id=6240,e.ids=[6240],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},82801:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>t.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>o,routeModule:()=>h,tree:()=>c}),a(40009),a(82959),a(60281);var r=a(65239),n=a(93006),i=a(8751),t=a.n(i),l=a(86747),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);a.d(s,d);let c=["",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,40009)),"/workspace/app/users/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,82959)),"/workspace/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,60281,23)),"next/dist/client/components/not-found-error"]}],o=["/workspace/app/users/page.tsx"],m="/users/page",u={require:a,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/users/page",pathname:"/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},48254:(e,s,a)=>{Promise.resolve().then(a.bind(a,62340))},62340:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>A});var r=a(51582),n=a(61751),i=a(18950),t=a(3372),l=a(6151),d=a(6901),c=a(3191),o=a(56897),m=a(4682),u=a(15040),h=a(32595),x=a(20334);function p({className:e}){return r.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}function j({users:e,onEditUser:s,onDeleteUser:a}){let n=e=>{switch(e){case"super_admin":return r.jsx(o.C,{variant:"default",children:"Super Admin"});case"admin":return r.jsx(o.C,{variant:"secondary",children:"Admin"});case"kasir":return r.jsx(o.C,{variant:"outline",children:"Kasir"});default:return r.jsx(o.C,{variant:"outline",children:e})}};return r.jsx("div",{className:"border rounded-lg",children:(0,r.jsxs)(d.iA,{children:[r.jsx(d.xD,{children:(0,r.jsxs)(d.SC,{children:[r.jsx(d.ss,{children:"Pengguna"}),r.jsx(d.ss,{children:"Email"}),r.jsx(d.ss,{children:"Role"}),r.jsx(d.ss,{children:"Status"}),r.jsx(d.ss,{className:"text-right",children:"Aksi"})]})}),r.jsx(d.RM,{children:e.map(e=>(0,r.jsxs)(d.SC,{children:[r.jsx(d.pj,{children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-blue-100 p-2 rounded-full",children:r.jsx(p,{className:"h-4 w-4 text-blue-600"})}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["ID: ",e.id]})]})]})}),r.jsx(d.pj,{children:e.email}),r.jsx(d.pj,{children:n(e.role)}),r.jsx(d.pj,{children:r.jsx(o.C,{variant:"default",className:"bg-green-100 text-green-800",children:"Aktif"})}),r.jsx(d.pj,{className:"text-right",children:(0,r.jsxs)(m.h_,{children:[r.jsx(m.$F,{asChild:!0,children:r.jsx(c.z,{variant:"ghost",size:"sm",children:r.jsx(u.Z,{className:"h-4 w-4"})})}),(0,r.jsxs)(m.AW,{align:"end",children:[(0,r.jsxs)(m.Xi,{onClick:()=>s(e),children:[r.jsx(h.Z,{className:"h-4 w-4 mr-2"}),"Edit"]}),(0,r.jsxs)(m.Xi,{onClick:()=>a(e.id),className:"text-red-600",disabled:"super_admin"===e.role,children:[r.jsx(x.Z,{className:"h-4 w-4 mr-2"}),"Hapus"]})]})]})})]},e.id))})]})})}var g=a(20013),f=a(70103),v=a(37377),b=a(66276);function w({user:e,isOpen:s,onClose:a,onSave:i,isLoading:t}){let[l,d]=(0,n.useState)({name:"",email:"",role:"kasir",password:"",confirmPassword:""}),o=(e,s)=>{d(a=>({...a,[e]:s}))};return r.jsx(v.Vq,{open:s,onOpenChange:a,children:(0,r.jsxs)(v.cZ,{className:"sm:max-w-[400px]",children:[(0,r.jsxs)(v.fK,{children:[r.jsx(v.$N,{children:e?"Edit Pengguna":"Tambah Pengguna Baru"}),r.jsx(v.Be,{children:e?"Ubah informasi pengguna di bawah ini.":"Masukkan informasi pengguna baru."})]}),(0,r.jsxs)("form",{onSubmit:s=>{if(s.preventDefault(),!e&&l.password!==l.confirmPassword){alert("Password tidak cocok!");return}let a={name:l.name,email:l.email,role:l.role};e&&(a.id=e.id),i(a)},className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(f._,{htmlFor:"name",children:"Nama Lengkap *"}),r.jsx(g.I,{id:"name",value:l.name,onChange:e=>o("name",e.target.value),placeholder:"Masukkan nama lengkap",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(f._,{htmlFor:"email",children:"Email *"}),r.jsx(g.I,{id:"email",type:"email",value:l.email,onChange:e=>o("email",e.target.value),placeholder:"masukkan@email.com",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(f._,{htmlFor:"role",children:"Role *"}),(0,r.jsxs)(b.Ph,{value:l.role,onValueChange:e=>o("role",e),children:[r.jsx(b.i4,{children:r.jsx(b.ki,{})}),(0,r.jsxs)(b.Bw,{children:[r.jsx(b.Ql,{value:"kasir",children:"Kasir"}),r.jsx(b.Ql,{value:"admin",children:"Admin"}),r.jsx(b.Ql,{value:"super_admin",children:"Super Admin"})]})]})]}),!e&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(f._,{htmlFor:"password",children:"Password *"}),r.jsx(g.I,{id:"password",type:"password",value:l.password,onChange:e=>o("password",e.target.value),placeholder:"Masukkan password",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(f._,{htmlFor:"confirmPassword",children:"Konfirmasi Password *"}),r.jsx(g.I,{id:"confirmPassword",type:"password",value:l.confirmPassword,onChange:e=>o("confirmPassword",e.target.value),placeholder:"Konfirmasi password",required:!0})]})]}),(0,r.jsxs)(v.cN,{children:[r.jsx(c.z,{type:"button",variant:"outline",onClick:a,children:"Batal"}),r.jsx(c.z,{type:"submit",disabled:t,children:t?"Menyimpan...":e?"Update":"Simpan"})]})]})]})})}var y=a(27365),N=a(51250),k=a(93213),P=a(75475);let C=(0,P.Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),_=(0,P.Z)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);var S=a(94650);function A(){let{user:e,isLoading:s}=(0,i.a)();(0,t.useRouter)();let{toast:a}=(0,N.pm)(),[d,o]=(0,n.useState)(!1),[m,u]=(0,n.useState)(null),[h,x]=(0,n.useState)(!1),[p,g]=(0,n.useState)([]),[f,v]=(0,n.useState)(!0),b=async e=>{if(confirm("Apakah Anda yakin ingin menghapus pengguna ini?")){x(!0);try{await fetch(`/api/users?id=${e}`,{method:"DELETE"}),g(p.filter(s=>s.id!==e)),a({title:"Pengguna dihapus",description:"Pengguna berhasil dihapus dari sistem"}),setRefreshTrigger(e=>e+1)}catch(e){a({title:"Gagal menghapus pengguna",description:"Terjadi kesalahan saat menghapus pengguna",variant:"destructive"})}finally{x(!1)}}},P=async e=>{x(!0);try{if(m)await fetch("/api/users",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:m.id,...e})}),g(p.map(s=>s.id===m.id?{...s,...e}:s)),a({title:"Pengguna diperbarui",description:"Informasi pengguna berhasil diperbarui"});else{let s=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await s.json();r?.data&&g([...p,r.data]),a({title:"Pengguna ditambahkan",description:"Pengguna baru berhasil ditambahkan ke sistem"})}o(!1),u(null),setRefreshTrigger(e=>e+1)}catch(e){a({title:"Gagal menyimpan pengguna",description:"Terjadi kesalahan saat menyimpan pengguna",variant:"destructive"})}finally{x(!1)}};if(s)return r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Memuat..."})]})});if(!e||"super_admin"!==e.role)return null;let A=p.length,M=p.filter(e=>"admin"===e.role||"super_admin"===e.role).length,q=p.filter(e=>"kasir"===e.role).length;return r.jsx(l.c,{title:"Manajemen Pengguna",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)(y.Zb,{children:[(0,r.jsxs)(y.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(y.ll,{className:"text-sm font-medium",children:"Total Pengguna"}),r.jsx(k.Z,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(y.aY,{children:r.jsx("div",{className:"text-2xl font-bold",children:A})})]}),(0,r.jsxs)(y.Zb,{children:[(0,r.jsxs)(y.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(y.ll,{className:"text-sm font-medium",children:"Admin"}),r.jsx(C,{className:"h-4 w-4 text-blue-500"})]}),r.jsx(y.aY,{children:r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:M})})]}),(0,r.jsxs)(y.Zb,{children:[(0,r.jsxs)(y.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(y.ll,{className:"text-sm font-medium",children:"Kasir"}),r.jsx(_,{className:"h-4 w-4 text-green-500"})]}),r.jsx(y.aY,{children:r.jsx("div",{className:"text-2xl font-bold text-green-600",children:q})})]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Daftar Pengguna"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Kelola pengguna dan hak akses sistem"})]}),(0,r.jsxs)(c.z,{onClick:()=>o(!0),children:[r.jsx(S.Z,{className:"h-4 w-4 mr-2"}),"Tambah Pengguna"]})]}),f?(0,r.jsxs)("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Memuat data pengguna..."})]}):r.jsx(j,{users:p,onEditUser:e=>{u(e),o(!0)},onDeleteUser:b}),r.jsx(w,{user:m,isOpen:d,onClose:()=>{o(!1),u(null)},onSave:P,isLoading:h})]})})}},40009:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>r});let r=(0,a(29682).createProxy)(String.raw`/workspace/app/users/page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),r=s.X(0,[6325,7985,5958,5058,881,7927,2604,5425],()=>a(82801));module.exports=r})();